[gd_scene load_steps=26 format=3 uid="uid://oi3i377mpp5w"]

[ext_resource type="Script" uid="uid://dajba2sd6o6cc" path="res://levels/main.gd" id="1_2262g"]
[ext_resource type="Shader" uid="uid://caje4wux2exux" path="res://content/shaders/background.gdshader" id="2_l8qe7"]
[ext_resource type="PackedScene" uid="uid://cxbtq6b3c4wxs" path="res://game/player_ui.tscn" id="2_m1504"]
[ext_resource type="PackedScene" uid="uid://dk4r11aytipf" path="res://game/tile.tscn" id="2_wdj6m"]
[ext_resource type="PackedScene" uid="uid://cpfp6725ej4av" path="res://game/destroy_particles.tscn" id="4_6et1j"]
[ext_resource type="Texture2D" uid="uid://cn2v73fst1q6l" path="res://content/textures/blank_texture.tres" id="5_5k4jt"]
[ext_resource type="Script" uid="uid://b5q4p6ic2b2xn" path="res://game/game_tile_map.gd" id="5_ifaiv"]
[ext_resource type="FontFile" uid="uid://dt4yqtnl1up6d" path="res://content/fonts/Quicksand-Bold.ttf" id="6_etqu2"]
[ext_resource type="PackedScene" uid="uid://bekwwqgev8iy1" path="res://game/damage_particles.tscn" id="7_qy63d"]
[ext_resource type="Script" uid="uid://bofu4yyhv1gaq" path="res://addons/audio/music_player.gd" id="10_jw1n3"]
[ext_resource type="AudioStream" uid="uid://c2a8c5as2lgao" path="res://content/audio/atmospheric-landscape-for-relaxation-145461.mp3" id="11_xdh4e"]
[ext_resource type="AudioStream" uid="uid://b20bas8nbxvs" path="res://content/audio/hit/hit-001.ogg" id="12_4fc0e"]
[ext_resource type="AudioStream" uid="uid://cgw23dltpoq18" path="res://content/audio/destroy-0.ogg" id="12_c7dyn"]
[ext_resource type="AudioStream" uid="uid://cuhvmelndw3sk" path="res://content/audio/hit/hit-002.ogg" id="13_21ko3"]
[ext_resource type="AudioStream" uid="uid://cc8qqjf3fo4xs" path="res://content/audio/hit/hit-003.ogg" id="14_s07ge"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m1504"]
shader = ExtResource("2_l8qe7")
shader_parameter/gradient_colors = PackedColorArray(0.9497126, 0.5941715, 0.27942315, 1, 0.6724502, 0.16953614, 0, 1, 0.73669446, 0.11695636, 0.046534494, 1)
shader_parameter/grid_size = 20.0
shader_parameter/circle_base = -0.15
shader_parameter/circle_growth = 0.6
shader_parameter/circle_speed = Vector2(-0.4, -0.4)

[sub_resource type="TileSetScenesCollectionSource" id="TileSetScenesCollectionSource_2262g"]
scenes/1/scene = ExtResource("2_wdj6m")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_qy63d"]
texture = ExtResource("5_5k4jt")
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_2262g"]
sources/0 = SubResource("TileSetScenesCollectionSource_2262g")
sources/1 = SubResource("TileSetAtlasSource_qy63d")

[sub_resource type="Theme" id="Theme_6et1j"]
default_base_scale = 1.0
default_font_size = 80
RichTextLabel/colors/font_outline_color = Color(0.39119378, 0.041800022, 7.219613e-08, 1)
RichTextLabel/constants/outline_size = 8
RichTextLabel/fonts/normal_font = ExtResource("6_etqu2")

[sub_resource type="Animation" id="Animation_etqu2"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}

[sub_resource type="Animation" id="Animation_6et1j"]
resource_name = "hide_title"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.23333333, 0.9666667),
"transitions": PackedFloat32Array(1.464086, 2.0705304),
"update": 0,
"values": [1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_etqu2"]
_data = {
&"RESET": SubResource("Animation_etqu2"),
&"hide_title": SubResource("Animation_6et1j")
}

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_c7dyn"]
random_pitch = 1.5
random_volume_offset_db = 6.0
streams_count = 3
stream_0/stream = ExtResource("12_4fc0e")
stream_0/weight = 0.25
stream_1/stream = ExtResource("13_21ko3")
stream_2/stream = ExtResource("14_s07ge")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_1fput"]
random_pitch = 1.25
random_volume_offset_db = 4.0
streams_count = 1
stream_0/stream = ExtResource("12_c7dyn")

[node name="Main" type="Node2D" node_paths=PackedStringArray("tilemap", "title_label", "animation_player", "destroy_sound", "damage_sound", "player_damage_sound", "player_destroy_sound")]
script = ExtResource("1_2262g")
tilemap = NodePath("Tiles")
title_label = NodePath("GameTitle")
animation_player = NodePath("GameTitle/AnimationPlayer")
player_ui_scene = ExtResource("2_m1504")
damage_particles_scene = ExtResource("7_qy63d")
destroy_particles_scene = ExtResource("4_6et1j")
destroy_sound = NodePath("DestroySound")
damage_sound = NodePath("DamageSound")
player_damage_sound = NodePath("PlayerDamageSound")
player_destroy_sound = NodePath("PlayerDestroySound")

[node name="Background" type="CanvasLayer" parent="."]
layer = -1

[node name="ColorRect" type="ColorRect" parent="Background"]
material = SubResource("ShaderMaterial_m1504")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Tiles" type="TileMapLayer" parent="."]
position = Vector2(-8, -8)
tile_map_data = PackedByteArray(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0)
tile_set = SubResource("TileSet_2262g")
script = ExtResource("5_ifaiv")

[node name="GameTitle" type="RichTextLabel" parent="."]
offset_left = -72.0
offset_top = -34.0
offset_right = 428.0
offset_bottom = 66.0
scale = Vector2(0.1, 0.1)
size_flags_horizontal = 8
theme = SubResource("Theme_6et1j")
text = "Game Name"
fit_content = true
autowrap_mode = 0
horizontal_alignment = 2

[node name="AnimationPlayer" type="AnimationPlayer" parent="GameTitle"]
libraries = {
&"": SubResource("AnimationLibrary_etqu2")
}

[node name="MusicPlayer" type="Node" parent="."]
script = ExtResource("10_jw1n3")
default_track = ExtResource("11_xdh4e")
metadata/_custom_type_script = "uid://bofu4yyhv1gaq"

[node name="PlayerDamageSound" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_c7dyn")
pitch_scale = 0.75
max_polyphony = 5
bus = &"Effects"

[node name="PlayerDestroySound" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_1fput")
max_polyphony = 3
bus = &"Effects"

[node name="DamageSound" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_c7dyn")
pitch_scale = 0.75
max_polyphony = 5
bus = &"Effects"

[node name="DestroySound" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_1fput")
max_polyphony = 3
bus = &"Effects"

[connection signal="bounds_changed" from="Tiles" to="." method="_bounds_changed"]
[connection signal="tile_damaged" from="Tiles" to="." method="_tile_damaged"]
[connection signal="tile_destroyed" from="Tiles" to="." method="_tile_destroyed"]
